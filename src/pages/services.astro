---
import Layout from "../layouts/Layout.astro";
import CDONavbar from "../components/cdoNavbar";
import Footer from "../components/footer.tsx";

// Import the SVG content directly
import { readFileSync } from 'fs';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);
const projectRoot = join(__dirname, '../../');

// Get language from URL parameter or default to English
const lang = Astro.url.searchParams.get('lang') || 'en';
const isLt = lang === 'lt';

console.log("Current language from URL:", lang);
console.log("Is Lithuanian:", isLt);

// Determine file paths based on language
const serviceTiersSvgFileName = isLt ? 'service-tiers-lt.svg' : 'service-tiers.svg';
const comparisonChartSvgFileName = isLt ? 'comparison-chart-lt.svg' : 'comparison-chart.svg';

// Read SVG files based on language
let serviceTiersToUse = '';
let comparisonChartToUse = '';

try {
  serviceTiersToUse = readFileSync(join(projectRoot, 'public/img', serviceTiersSvgFileName), 'utf-8');
  comparisonChartToUse = readFileSync(join(projectRoot, 'public/img', comparisonChartSvgFileName), 'utf-8');
  
  console.log(`Successfully loaded SVG files for language: ${lang}`);
  console.log(`Service tiers file: ${serviceTiersSvgFileName}`);
  console.log(`Comparison chart file: ${comparisonChartSvgFileName}`);
  console.log(`Service tiers SVG content starts with: ${serviceTiersToUse.substring(0, 50)}...`);
} catch (error) {
  console.error("Error loading SVG files:", error);
  // Fallback to English in case of error
  try {
    serviceTiersToUse = readFileSync(join(projectRoot, 'public/img/service-tiers.svg'), 'utf-8');
    comparisonChartToUse = readFileSync(join(projectRoot, 'public/img/comparison-chart.svg'), 'utf-8');
    console.log("Falling back to English SVGs due to error");
  } catch (fallbackError) {
    console.error("Error loading fallback SVG files:", fallbackError);
    serviceTiersToUse = '<svg><text>Error loading SVG</text></svg>';
    comparisonChartToUse = '<svg><text>Error loading SVG</text></svg>';
  }
}

// Update link URLs to include language parameter
const contactLink = isLt ? "/contact?lang=lt" : "/contact?lang=en";
---

<Layout title="Our Services | CDO as a Service">
  <main>
    <CDONavbar client:only="react" />
    
    <!-- page header -->
    <div class="relative pt-20 pb-32 flex content-center items-center justify-center min-h-[75vh]">
      <div class="absolute top-0 w-full h-full bg-center bg-cover" style="background-image: url('/img/services-bg.jpg');">
        <span class="w-full h-full absolute opacity-50 bg-black"></span>
      </div>
      <div class="container relative mx-auto px-4">
        <div class="items-center flex flex-wrap">
          <div class="w-full lg:w-6/12 px-4 ml-auto mr-auto text-center">
            <div class="text-white">
              <h1 class="text-5xl font-semibold" data-i18n="services.title">Our Services</h1>
              <p class="mt-4 text-lg" data-i18n="services.subtitle">Flexible data leadership solutions for small and medium enterprises</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Service Tiers section -->
    <section class="pb-20 bg-gray-100 -mt-24">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-semibold mt-16" data-i18n="services.tiers.title">Engagement Tiers</h2>
          <p class="text-lg text-gray-600 mt-4" data-i18n="services.tiers.subtitle">
            Choose the level of support that fits your organization's needs and budget
          </p>
        </div>
        <div class="flex flex-wrap items-center">
          <div class="w-full mx-auto overflow-hidden">
            <!-- Directly embed SVG to ensure proper rendering -->
            <div class="max-w-full mx-auto" style="height: auto; min-height: 600px;">
              <!-- Language indicator (visible for debugging) -->
              <div class="text-xs text-gray-400 mb-2">Current language: {lang} | SVG file: {serviceTiersSvgFileName}</div>
              
              <Fragment set:html={serviceTiersToUse} />
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Cost Comparison section -->
    <section class="py-20">
      <div class="container mx-auto px-4">
        <div class="flex flex-wrap items-center">
          <div class="w-full md:w-5/12 px-4 mr-auto ml-auto">
            <div class="text-gray-600 p-3 text-center inline-flex items-center justify-center w-16 h-16 mb-6 shadow-lg rounded-full bg-gray-100">
              <i class="fas fa-chart-bar text-xl"></i>
            </div>
            <h3 class="text-3xl mb-2 font-semibold leading-normal" data-i18n="services.comparison.title">
              Cost-Effective Solution
            </h3>
            <p class="text-lg font-light leading-relaxed mt-4 mb-4 text-gray-700" data-i18n="services.comparison.description">
              Our CDO as a Service model delivers expert data leadership at a fraction of the cost of a full-time CDO. On average, organizations save 60-80% compared to hiring a full-time executive.
            </p>
            <p class="text-lg font-light leading-relaxed mt-0 mb-4 text-gray-700">
              With flexible service tiers, you can start with a level of service that meets your immediate needs and scale up as your data capabilities mature.
            </p>
            <a href={contactLink} class="mt-4 inline-block bg-blue-500 text-white font-bold px-6 py-4 rounded hover:bg-blue-600 transition-all" data-i18n="services.comparison.requestPricing">
              Request Pricing Details
            </a>
          </div>
          <div class="w-full md:w-4/12 px-4 mr-auto ml-auto">
            <!-- Directly embed SVG to avoid loading issues -->
            <div class="max-w-full rounded-lg shadow-lg overflow-hidden">
              <div class="text-xs text-gray-400 mb-2">SVG file: {comparisonChartSvgFileName}</div>
              <Fragment set:html={comparisonChartToUse} />
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Core Services section -->
    <section class="pb-20 bg-gray-100">
      <div class="container mx-auto px-4">
        <div class="flex flex-wrap items-center">
          <div class="w-full lg:w-6/12 px-4 ml-auto mr-auto">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-semibold" data-i18n="services.core.title">Core Service Areas</h2>
              <p class="text-lg text-gray-600 mt-4" data-i18n="services.core.subtitle">
                Comprehensive data leadership across key domains
              </p>
            </div>
          </div>
        </div>
        <div class="flex flex-wrap">
          <div class="lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg">
              <div class="px-4 py-5 flex-auto">
                <div class="text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-blue-400">
                  <i class="fas fa-chart-line"></i>
                </div>
                <h6 class="text-xl font-semibold" data-i18n="services.core.strategy.title">Data Strategy</h6>
                <p class="mt-2 mb-4 text-gray-600" data-i18n="services.core.strategy.description">
                  Development of comprehensive data strategies aligned with business objectives, including roadmap creation, capability assessments, and technology selection.
                </p>
              </div>
            </div>
          </div>
          <div class="lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg">
              <div class="px-4 py-5 flex-auto">
                <div class="text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-green-400">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <h6 class="text-xl font-semibold" data-i18n="services.core.governance.title">Data Governance</h6>
                <p class="mt-2 mb-4 text-gray-600" data-i18n="services.core.governance.description">
                  Implementation of governance frameworks, data quality processes, metadata management, and data catalog solutions to ensure data is trustworthy and accessible.
                </p>
              </div>
            </div>
          </div>
          <div class="lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg">
              <div class="px-4 py-5 flex-auto">
                <div class="text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-yellow-400">
                  <i class="fas fa-lightbulb"></i>
                </div>
                <h6 class="text-xl font-semibold" data-i18n="services.core.analytics.title">Data Analytics</h6>
                <p class="mt-2 mb-4 text-gray-600" data-i18n="services.core.analytics.description">
                  Enablement of analytics capabilities from reporting and dashboards to advanced analytics and predictive modeling, focused on driving business insights.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="flex flex-wrap mt-4">
          <div class="lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg">
              <div class="px-4 py-5 flex-auto">
                <div class="text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-red-400">
                  <i class="fas fa-brain"></i>
                </div>
                <h6 class="text-xl font-semibold" data-i18n="services.core.ml.title">AI & Innovation</h6>
                <p class="mt-2 mb-4 text-gray-600" data-i18n="services.core.ml.description">
                  Guidance on AI adoption, machine learning implementation, and data-driven innovation to create competitive advantages and new value streams.
                </p>
              </div>
            </div>
          </div>
          <div class="lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg">
              <div class="px-4 py-5 flex-auto">
                <div class="text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-purple-400">
                  <i class="fas fa-users"></i>
                </div>
                <h6 class="text-xl font-semibold" data-i18n="services.core.team.title">Team Development</h6>
                <p class="mt-2 mb-4 text-gray-600" data-i18n="services.core.team.description">
                  Building data capability within your organization through training, mentoring, and knowledge transfer to ensure long-term self-sufficiency.
                </p>
              </div>
            </div>
          </div>
          <div class="lg:pt-12 pt-6 w-full md:w-4/12 px-4 text-center">
            <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-8 shadow-lg rounded-lg">
              <div class="px-4 py-5 flex-auto">
                <div class="text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-indigo-400">
                  <i class="fas fa-project-diagram"></i>
                </div>
                <h6 class="text-xl font-semibold" data-i18n="services.core.integrations.title">Project Delivery</h6>
                <p class="mt-2 mb-4 text-gray-600" data-i18n="services.core.integrations.description">
                  Hands-on support for data initiatives, from requirements gathering to implementation and management of data projects to ensure successful outcomes.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Call to Action section -->
    <section class="pb-20 relative block bg-gray-900">
      <div class="bottom-auto top-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden -mt-20 h-20" style="transform: translateZ(0px)">
        <svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" version="1.1" viewBox="0 0 2560 100" x="0" y="0">
          <polygon class="text-gray-900 fill-current" points="2560 0 2560 100 0 100"></polygon>
        </svg>
      </div>
      <div class="container mx-auto px-4 pt-12 pb-12">
        <div class="flex flex-wrap text-center justify-center">
          <div class="w-full lg:w-6/12 px-4">
            <h2 class="text-4xl font-semibold text-white" data-i18n="services.ready.title">Ready to Transform Your Data Capabilities?</h2>
            <p class="text-lg leading-relaxed mt-4 mb-4 text-gray-400" data-i18n="services.ready.description">
              Book a free consultation to discuss how our CDO as a Service offering can help your organization harness the power of data.
            </p>
          </div>
        </div>
        <div class="flex flex-wrap mt-12 justify-center">
          <div class="w-full text-center">
            <a href={contactLink} class="bg-blue-500 text-white active:bg-blue-600 font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1" data-i18n="services.contact">
              Contact us today
            </a>
          </div>
        </div>
      </div>
    </section>
    
    <Footer client:only="react" />
  </main>
</Layout> 